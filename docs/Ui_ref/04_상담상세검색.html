<!doctype html> <html lang="ko"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>상담 검색 - KWH 지식관리시스템</title> <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;600;700&display=swap" rel="stylesheet"> <style> body { box-sizing: border-box; margin: 0; padding: 0; font-family: "Noto Sans KR", "Apple SD Gothic Neo", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; font-size: 14px; line-height: 1.5; color: #212121; background-color: #FAFAFA; 높이: 100%; } *, *::before, *::after { box-sizing: inherit; } html { 높이: 100%; } /* 앱 헤더 */ .app-header { 높이: 60px; 배경색: #FFFFFF; 테두리 하단: 1px 단색 #E0E0E0; 패딩: 0 24px; 디스플레이: flex; 정렬 항목: 가운데 정렬; 내용 정렬: 공백; } .app-header-left h1 { 여백: 0; 글꼴 크기: 18px; 글꼴 두께: 700; 색상: #005BAC; } .app-header-left p { 여백: 0; 글꼴 크기: 12px; 색상: #6E6E6E; } .app-header-right { 디스플레이: flex; 정렬 항목: 가운데 정렬; 간격: 12px; 글꼴 크기: 13px; 색상: #424242; } .app-header-divider { 색상: #BDBDBD; } .role-badge { 디스플레이: 인라인 블록; 배경색: #E8F1FB; 색상: #1A73E8; 테두리 반경: 999px; 글꼴 크기: 11px; 글꼴 무게: 600; 패딩: 2px 8px; } .btn-logout { 배경색: #FFFFFF; 색상: #005BAC; 테두리: 1px 단색 #005BAC; 테두리 반경: 4px; 패딩: 4px 12px; 글꼴 크기: 13px; 글꼴 무게: 600; 커서: 포인터; 전환: 배경색 0.2초; } .btn-logout:hover { 배경색: #E8F1FB; } /* 레이아웃 컨테이너 */ .app-container { display: flex; height: calc(100% - 60px); } /* 사이드바 */ .app-sidebar { width: 240px; background-color: #F5F7FB; border-right: 1px solid #E0E0E0; overflow-y: auto; padding: 16px 0; } .menu-section { margin-bottom: 24px; } .menu-section-title { font-size: 11px; font-weight: 600; color: #6E6E6E; text-transform: uppercase; padding: 8px 16px; margin-bottom: 4px; } .menu-item { display: flex; align-items: center; gap: 8px; padding: 8px 16px; font-size: 14px; 색상: #424242; 커서: 포인터; 전환: 모두 0.2초; 텍스트 장식: 없음; 테두리 왼쪽: 3px 단색 투명; } .menu-item:hover { 배경색: #E8F1FB; 색상: #005BAC; } .메뉴 항목.활성 { 배경색: #D2E4FA; 색상: #005BAC; 테두리 왼쪽 색상: #005BAC; 글꼴 가중치: 600; } .menu-icon { 너비: 18px; 높이: 18px; flex-shrink: 0; } /* 주요 콘텐츠 */ .main-content { flex: 1; overflow-y: auto; 패딩: 24px; } .page-header { 여백 하단: 24px; } .page-title { 글꼴 크기: 24px; 글꼴 가중치: 700; 색상: #212121; 여백: 0 0 8px 0; 줄 높이: 1.4; } .page-subtitle { 글꼴 크기: 14px; 색상: #6E6E6E; 여백: 0; } /* 검색 카드 */ .search-card { 배경색: #FFFFFF; 테두리 반경: 8px; 상자 그림자: 0px 1px 3px rgba(0,0,0,0.08); 패딩: 20px; 여백 하단: 24px; } .search-section-title { 글꼴 크기: 16px; 글꼴 무게: 600; 색상: #212121; 여백: 0 0 16px 0; 패딩 하단: 8px; 테두리 하단: 1px 단색 #E0E0E0; 디스플레이: flex; 정렬 항목: 중앙; 간격: 8px; } .section-icon { 너비: 20px; 높이: 20px; 색상: #005BAC; } .search-grid { 디스플레이: 그리드; 그리드 템플릿 열: 반복(2, 1fr); 간격: 16px; margin-bottom: 16px; } .search-field { display: flex; flex-direction: column; } .search-field.full-width { grid-column: 1 / -1; } .search-label { font-size: 13px; font-weight: 600; color: #212121; margin-bottom: 4px; } .search-input, .search-select { min-height: 36px; border: 1px solid #BDBDBD; border-radius: 4px; padding: 0 12px; font-size: 14px; font-family: inherit; color: #212121; transition: all 0.2s; } .search-input:focus, .search-select:focus { outline: none; border-color: #1A73E8; box-shadow: 0 0 0 1px rgba(26,115,232,0.2); } .search-actions { display: flex; justify-content: flex-end; gap: 12px; padding-top: 16px; border-top: 1px solid #E0E0E0; } .btn-primary { background-color: #005BAC; color: #FFFFFF; border: none; border-radius: 6px; min-height: 36px; padding: 0 20px; font-size: 14px; font-weight: 600; cursor: pointer; transition: background-color 0.2s; display: inline-flex; align-items: center; gap: 6px; } .btn-primary:hover:not(:disabled) { background-color: #00437F; } .btn-primary:disabled { 배경색: #BDBDBD; 커서: 허용되지 않음; } .btn-secondary { 배경색: #FFFFFF; 색상: #005BAC; 테두리: 1px 단색 #005BAC; 테두리 반경: 6px; 최소 높이: 36px; 패딩: 0~20px; 글꼴 크기: 14px; 글꼴 두께: 600; 커서: 포인터; 전환: 모두 0.2초; } .btn-secondary:hover { 배경색: #E8F1FB; } .btn-icon { 너비: 16px; 높이: 16px; } /* 결과 카드 */ .results-card { 배경색: #FFFFFF; 테두리 반경: 8px; 상자 그림자: 0px 1px 3px rgba(0,0,0,0.08); 패딩: 20px; } .results-header { 디스플레이: flex; justify-content: 간격; 정렬-항목: 가운데; 여백-바닥: 16px; 패딩-바닥: 12px; 테두리-바닥: 1px 단색 #E0E0E0; } .results-title { 글꼴 크기: 16px; 글꼴 두께: 600; 색상: #212121; 여백: 0; } .results-count { 글꼴 크기: 13px; color: #6E6E6E; } .results-count-number { font-weight: 700; color: #005BAC; } /* 결과 표 */ .results-table-wrapper { overflow-x: auto; margin-bottom: 16px; } .results-table { width: 100%; border-collapse: collapse; font-size: 14px; } .results-table thead { background-color: #F5F7FB; } .results-table th { text-align: left; padding: 12px; font-weight: 600; color: #424242; border-bottom: 2px solid #E0E0E0; font-size: 13px; white-space: nowrap; } .results-table td { padding: 12px; 테두리-바닥: 1px 단색 #E0E0E0; 색상: #212121; } .results-table tbody tr { 커서: 포인터; 전환: 배경색 0.2초; } .results-table tbody tr:hover { 배경색: #F5F7FB; } .results-table tbody tr:last-child td { 테두리-바닥: 없음; } .consultation-id { 글꼴-가중치: 600; 색상: #005BAC; } .business-type-badge { 디스플레이: 인라인-플렉스; 정렬-항목: 중앙; 패딩: 3px 10px; 테두리-반경: 4px; 글꼴-크기: 12px; 글꼴-가중치: 600; 공백: nowrap; } .business-type-badge.deposit { 배경색: #E8F5E9; 색상: #2E7D32; } .business-type-badge.loan { 배경색: #FFF3E0; 색상: #F57C00; } .business-type-badge.card { 배경색: #F3E5F5; 색상: #7B1FA2; } .business-type-badge.exchange { 배경색: #E3F2FD; 색상: #1976D2; } .business-type-badge.internet { 배경색: #E0F2F1; 색상: #00796B; } .business-type-badge.mobile { 배경색: #FCE4EC; 색상: #C2185B; } .business-type-badge.other { 배경색: #ECEFF1; 색상: #455A64; } .inquiry-summary { 최대 너비: 300px; 오버플로: 숨김; text-overflow: ellipsis; white-space: nowrap; } /* 유사도 점수 진행률 */ .similarity-score { display: flex; align-items: center; gap: 8px; } .similarity-progress { flex: 1; height: 8px; background-color: #E0E0E0; border-radius: 4px; overflow:숨김; 최소 너비: 80px; } .similarity-progress-bar { 높이: 100%; 테두리 반경: 4px; 전환: 너비 0.3초; } .similarity-progress-bar.high { 배경색: #2E7D32; } .similarity-progress-bar.medium { 배경색: #F57C00; } .similarity-progress-bar.low { 배경색: #C62828; } .similarity-value { 글꼴 크기: 13px; 글꼴 무게: 600; 색상: #424242; 최소 너비: 40px; 텍스트 정렬: 오른쪽; } /* 페이지 번호 매기기 */ .pagination { 디스플레이: flex; justify-content: center; 정렬-항목: center; 간격: 8px; 여백-상단: 16px; 패딩 상단: 16px; 테두리 상단: 1px 단색 #E0E0E0; } .pagination-btn { 최소 너비: 32px; 최소 높이: 32px; 테두리: 1px 단색 #BDBDBD; 배경색: #FFFFFF; 색상: #424242; 테두리 반경: 4px; 글꼴 크기: 13px; 글꼴 두께: 600; 커서: 포인터; 전환: 모두 0.2초; 디스플레이: flex; 정렬 항목: 중앙; justify-content: 중앙; 패딩: 0 8px; } .pagination-btn:hover:not(:disabled):not(.active) { 배경색: #E8F1FB; 테두리 색상: #005BAC; 색상: #005BAC; } .pagination-btn:disabled { 불투명도: 0.4; 커서: 허용되지 않음; } .pagination-btn.active { 배경색: #005BAC; 색상: #FFFFFF; 테두리색: #005BAC; } .pagination-icon { 너비: 14px; 높이: 14px; } /* 빈 상태 */ .empty-state { 텍스트 정렬: 가운데; 패딩: 48px 24px; 색상: #6E6E6E; } .empty-state-icon { 너비: 64px; 높이: 64px; 여백: 0 자동 16px; 색상: #BDBDBD; } .empty-state-title { 글꼴 크기: 16px; 글꼴 두께: 600; 색상: #424242; 여백: 0 0 8px 0; } .empty-state-text { 글꼴 크기: 14px; 색상: #6E6E6E; 여백: 0; } /* 스피너 로딩 */ .spinner { display: inline-block; width: 16px; height: 16px; border: 2px solid #FFFFFF; border-top-color: transparent; border-radius: 50%; animation: spin 0.8s linear infinite; } .spinner-large { width: 48px; height: 48px; border: 4px solid #E0E0E0; border-top-color: #005BAC; } @keyframes spin { to { transform: rotate(360deg); } } .loading-state { text-align: center; padding: 48px 24px; } .loading-text { margin-top: 16px; font-size: 14px; color: #6E6E6E; } /* 토스트 알림 */ .toast { position: fixed; top: 80px; right: 24px; 배경색: #FFFFFF; 테두리 반경: 6px; 상자 그림자: 0px 4px 12px rgba(0,0,0,0.15); 패딩: 12px 16px; 표시: 없음; 정렬 항목: 가운데; 간격: 8px; z-인덱스: 2000; 최소 너비:280px; border-left: 4px solid; } .toast.show { display: flex; animation: slideIn 0.3s ease-out; } .toast.success { border-left-color: #2E7D32; } .toast.error { border-left-color: #C62828; } .toast-icon { width: 20px; height: 20px; flex-shrink: 0; } .toast-message { flex: 1; font-size: 14px; color: #212121; } @keyframes slideIn { from { transform: translateX(400px); opacity: 0; } to { transform: translateX(0); opacity: 1; } } </style> <style>@view-transition { navigation: auto; }</style> <script src="/_sdk/data_sdk.js" type="text/javascript"></script> <script src="/_sdk/element_sdk.js" type="text/javascript"></script> <script src="https://cdn.tailwindcss.com" type="text/javascript"></script> </head> <body><!-- 앱 헤더 --> <header class="app-header"> <div class="app-header-left"> <h1>KWH 지식관리시스템</h1> <p>광주은행 헬프데스크 위키</p> </div> <div class="app-header-right"><span>디지털전략부</span> <span class="app-header-divider">·</span> <span>홍길동</span> <span class="app-header-divider">·</span> <span class="role-badge">상담사</span> <button class="btn-logout" onclick="handleLogout()">로그아웃</button> </div> </header><!-- 앱 컨테이너 --> <div class="app-container"><!-- 사이드바 --> <aside class="app-sidebar"> <nav> <div class="menu-section"> <div class="menu-section-title"> 메인 </div><a href="#" class="menu-item"> <svg class="menu-icon" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"></rect> <rect x="14" y="3" width="7" height="7"></rect> <rect x="14" y="14" width="7" height="7"></rect> <rect x="3" y="14" width="7" height="7"></rect> </svg> 대시보드 </a> </div> <div class="menu-section"> <div class="menu-section-title"> 상담 관리 </div><a href="#" class="menu-item"> <svg class="menu-icon" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 20h9"></path> <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path> </svg> 상담 등록 </a> <a href="#" class="menu-item active"> <svg class="menu-icon" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"></circle> <path d="m21 21-4.35-4.35"></path> </svg> 상담 검색 </a> </div> <div class="menu-section"> <div class="menu-section-title"> 메뉴얼 관리 </div><a href="#" class="menu-item"> <svg class="menu-icon" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path> <polyline points="14 2 14 8 20 8"></polyline> </svg> 메뉴얼 검색 </a> <a href="#" class="menu-item"> <svg class="menu-icon" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle> <polyline points="12 6 12 12 16 14"></polyline> </svg> 메뉴얼 버전 이력 </a> </div> <div class="menu-section"> <div class="menu-section-title"> 검토/승인 </div><a href="#" class="menu-item"> <svg class="menu-icon" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 11 12 14 22 4"></polyline> <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path> </svg> 검토 작업 목록 </a> </div> <div class="menu-section"> <div class="menu-section-title"> 관리자 </div><a href="#" class="menu-item"> <svg class="menu-icon" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path> <circle cx="9" cy="7" r="4"></circle> <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path> <path d="M16 3.13a4 4 0 0 1 0 7.75"></path> </svg> 사용자/권한 관리 </a> <a href="#" class="menu-item"> <svg class="menu-icon" viewbox="0 0 24 24" fill="none" 스트로크="currentColor" 스트로크-폭="2"><circle cx="12" cy="12" r="3"></circle> <path d="M12 1v6m0 6v6m-6-6H0m6 0h6m0-6h6m-6 6h6"></path> </svg> 시스템 설정 </a> </div> </nav> </aside><!-- Main Content -->
   <main class="main-content">
    <div class="page-header">
     <h2 class="page-title">상담 검색</h2>
     <p class="page-subtitle">등록된 상담 내역을 텍스트 및 필터 조건으로 검색합니다</p>
    </div><!-- Search Card -->
    <div class="search-card">
     <h3 class="search-section-title">
      <svg class="section-icon" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"></circle> <path d="m21 21-4.35-4.35"></path>
      </svg> 검색 조건</h3>
     <form id="searchForm" onsubmit="handleSearch(event)">
      <div class="search-grid">
       <div class="search-field full-width"><label class="search-label">검색어</label> <input type="text" class="search-input" id="query" name="query" placeholder="문의내용, 조치내용에서 검색">
       </div>
       <div class="search-field"><label class="search-label">업무구분</label> <select class="search-select" id="business_type" name="business_type"> <option value="">전체</option> <option value="DEPOSIT">예금</option> <option value="LOAN">대출</option> <option value="CARD">카드</option> <option value="EXCHANGE">환전</option> <option value="INTERNET">인터넷뱅킹</option> <option value="MOBILE">모바일뱅킹</option> <option value="OTHER">기타</option> </select>
       </div>
       <div class="search-field"><label class="search-label">영업점</label> <select class="search-select" id="branch_code" name="branch_code"> <option value="">전체</option> <option value="BR001">본점</option> <option value="BR002">광주지점</option> <option value="BR003">목포지점</option> <option value="BR004">순천지점</option> <option value="BR005">여수지점</option> </select>
       </div>
       <div class="search-field"><label class="search-label">에러코드</label> <input type="text" class="search-input" id="error_code" name="error_code" placeholder="예:E001"> </div> <div class="search-field"><label class="search-label">시작일</label> <input type="date" class="search-input" id="start_date" name="start_date"> </div> <div class="search-field"><label class="search-label">종료일</label> <input type="date" class="search-input" id="end_date" name="end_date"> </div> </div> <div class="search-actions"><button type="button" class="btn-secondary" onclick="handleReset()">초기화</button> <button type="submit" class="btn-primary" id="searchBtn"> <svg class="btn-icon" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"></circle> <path d="m21 21-4.35-4.35"></path> </svg><span id="searchBtnText">검색</span> </button> </div> </form> </div><!-- 결과 카드 --> <div class="results-card"> <div class="results-header"> <h3 class="results-title">검색 결과</h3> <div class="results-count" id="resultsCount"> 총 <span class="results-count-number">0</span>건 </div> </div><!-- 결과 표 --> <div id="resultsContainer"><!-- 초기 빈 상태 --> <div class="empty-state" id="emptyState"> <svg class="empty-state-icon" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"></circle> <path d="m21 21-4.35-4.35"></path> </svg> <p class="empty-state-title">검색을 입력해주세요</p> <p class="empty-state-text">위의 검색을 입력하고 버튼을 클릭하세요</p> </div> </div><!-- 페이지 매김 --> <div class="pagination" id="pagination" style="display: none;"></div> </div> </main> </div><!-- 토스트 알림 --> <div class="toast" id="toast"> <svg class="toast-icon" viewbox="0 0 24 24" fill="none" 스트로크="currentColor" 스트로크-폭="2" id="toastIcon"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path> <polyline points="22 4 12 14.01 9 11.01"></polyline> </svg><span class="toast-message" id="toastMessage"></span> </div> <script> // 상태 관리 let currentPage = 1; let totalPages = 1; let currentSearchParams = null; const itemsPerPage = 10; // 업종 매핑 const businessTypeMap = { 'DEPOSIT': { label: '예금', class: 'deposit' }, 'LOAN': { label: '대출', class: '대출' }, 'CARD': { label: '카드', class: '카드' }, 'EXCHANGE': { label: '환전', class: '교환' }, 'INTERNET': { label: '인터넷뱅킹', class: '인터넷' }, 'MOBILE': { label: '모바일뱅킹', class: '모바일' }, 'OTHER': { label: '기타', class: '기타' } }; // 지점 이름 매핑 const branchNameMap = { 'BR001': '본점', 'BR002': '광주지점', 'BR003': '목포지점', 'BR004': '순천지점', 'BR005': '여수지점' }; // 검색 양식 제출 처리 비동기 함수 handleSearch(event) { event.preventDefault(); const form = document.getElementById('searchForm'); const formData = new FormData(form); // 검색 매개변수 작성 const searchParams = {}; formData.forEach((value, key) => { if (value && value.trim() !== '') { searchParams[key] = value.trim(); } }); // 날짜 범위 유효성 검사 if (searchParams.start_date && searchParams.end_date) { const startDate = new Date(searchParams.start_date); const endDate = new Date(searchParams.end_date); if (startDate > endDate) { showToast('종료일은 시작일보다 이후여야 합니다.', 'error'); return; } } // 검색 매개변수를 저장하고 1페이지로 재설정 currentSearchParams = searchParams; currentPage = 1; // 검색 수행 await performSearch(currentSearchParams, currentPage); } // 검색 API 호출 수행 async function performSearch(params, page) { const searchBtn = document.getElementById('searchBtn'); const searchBtnText = document.getElementById('searchBtnText'); const resultsContainer = document.getElementById('resultsContainer'); // 로딩 상태 표시 searchBtn.disabled = true; searchBtnText.innerHTML = '<span class="spinner"></span>'; resultsContainer.innerHTML = ` <div class="loading-state"> <div class="spinner spinner-large"></div> <div class="loading-text">검색 중...</div> </div> `; try { // TODO:API Connect - GET /api/consultations/search // 요청 매개변수: { ...params, page, limit: itemsPerPage } // API 호출 시뮬레이션 await new Promise(resolve => setTimeout(resolve, 1000)); // 모의 응답 데이터 const mockResults = generateMockResults(page); if (mockResults.data.length > 0) { renderResults(mockResults.data); renderPagination(mockResults.pagination); } else { renderNoResults(); } } catch (error) { console.error('검색 오류:', error); showToast('검색 중 오류가 발생했습니다.', 'error'); renderNoResults(); } finally { // 버튼 상태 재설정 searchBtn.disabled = false; searchBtnText.innerHTML = '검색'; } } // 데모 함수에 대한 모의 결과 생성 generateMockResults(page) { const totalItems = 47; const 시작 = (페이지 - 1) * 페이지당 항목 수; const 종료 = Math.min(시작 + 페이지당 항목 수, 총 항목 수); const 결과 = []; 시작에 대해 i < 종료; i++) { const businessTypes = Object.keys(businessTypeMap); const randomBusinessType = businessTypes[i % businessTypes.length]; results.push({ id: `CONS-${1000 + i}`, Branch_code: `BR00${(i % 5) + 1}`, business_type: randomBusinessType, error_code: `E${String(i % 10).padStart(3, '0')}`, query_text: `고객이 ${businessTypeMap[randomBusinessType].label} 관련 문제가 발생했습니다. 다음 단계로 진행되지 않는 상황입니다. 고객 정보가 입력되었지만 시스템 인증 단계에서 실패하고 있습니다.`, 유사성_점수: 95 - (i % 30), Create_at: new Date(Date.now() - i * 3600000).toISOString() }); } return { 데이터: 결과, 페이지 매기기: { current_page: 페이지, total_pages: Math.ceil(totalItems / itemsPerPage), total_items: totalItems, items_per_page: itemsPerPage } }; } // 검색 결과 렌더링 함수 renderResults(results) { const resultsContainer = document.getElementById('resultsContainer'); const resultsCount = document.getElementById('resultsCount'); // 개수 업데이트 resultsCount.innerHTML = `총 <span class="results-count-number">${results.length}</span>건`; // 테이블 렌더링 const tableHTML = ` <div class="results-table-wrapper"> <table class="results-table"> <thead> <tr> <th style="width: 130px;">상담 ID</th> <th style="width: 100px;">영업점</th> <th style="width: 110px;">업무구분</th> <th style="width:100px;">에러코드</th> <th>문의내용</th> <th style="width: 140px;">유사도 점수</th> <th style="width: 150px;">등록일시</th> </tr> </thead> <tbody> ${results.map(item => ` <tr onclick="handleRowClick('${item.id}')"> <td class="consultation-id">${item.id}</td> <td>${branchNameMap[item.branch_code] || item.branch_code}</td> <td> <span class="business-type-badge ${businessTypeMap[item.business_type].class}"> ${businessTypeMap[item.business_type].label} </span> </td> <td>${item.error_code}</td> <td> <div class="inquiry-summary" title="${escapeHtml(item.inquiry_text)}"> ${truncateText(item.inquiry_text, 80)} </div> </td> <td> <div class="유사성-점수"> <div class="유사성-진행"> <div class="유사성-진행-바 ${getSimilarityClass(item.similarity_score)}" style="너비: ${item.similarity_score}%"> </div> </div> <span class="유사성-값">${item.similarity_score}%</span> </div> </td> <td>${formatDateTime(item.created_at)}</td> </tr> `).join('')} </tbody> </table> </div> `; resultsContainer.innerHTML = tableHTML; } // 페이지 매김 렌더링 함수 renderPagination(pagination) { const paginationContainer = document.getElementById('pagination'); if (!pagination || pagination.total_pages <= 1) { paginationContainer.style.display = 'none'; return; } paginationContainer.style.display = 'flex'; currentPage = pagination.current_page; totalPages = pagination.total_pages; let paginationHTML = ''; // 이전 버튼 paginationHTML += ` <button class="pagination-btn" onclick="goToPage(${currentPage - 1})" ${currentPage === 1 ? 'disabled' :''}> <svg class="pagination-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"> <polyline points="15 18 9 12 15 6"></polyline> </svg> </button> `; // 페이지 번호 const pageNumbers = getPageNumbers(currentPage, totalPages); pageNumbers.forEach(pageNum => { if (pageNum === '...') { paginationHTML += '<span style="padding: 0 4px;">...</span>'; } else { paginationHTML += ` <button class="pagination-btn ${pageNum === currentPage ? 'active' : ''}" onclick="goToPage(${pageNum})"> ${pageNum} </button> `; } }); // 다음 버튼 paginationHTML += ` <button class="pagination-btn" onclick="goToPage(${currentPage + 1})" ${currentPage === totalPages ? 'disabled' : ''}> <svg class="pagination-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </button> `; paginationContainer.innerHTML = paginationHTML; } // 페이지 번호 가져오기 function getPageNumbers(current, total) { const pages = []; const maxVisible = 5; if (total <= maxVisible) { for (let i = 1; i <= total; i++) { pages.push(i); } } else { if (current <= 3) { for (let i = 1; i <= 4; i++) { pages.push(i); } pages.push('...'); pages.push(total); } else if (current >= total - 2) { pages.push(1); pages.push('...'); for (let i = total - 3; i <= total; i++) { pages.push(i); } } else { pages.push(1); pages.push('...'); pages.push(current - 1); pages.push(current); pages.push(current + 1); pages.push('...'); pages.push(total); } } return pages; } // 특정 페이지로 이동 function goToPage(page) { if (page < 1 || page > totalPages || page === currentPage) { return; } currentPage = page; performSearch(currentSearchParams, page); // 결과의 맨 위로 스크롤 document.querySelector('.results-card').scrollIntoView({ behavior: 'smooth' }); } // 결과 없음 상태를 렌더링합니다. function renderNoResults() { const resultsContainer = document.getElementById('resultsContainer');
      const resultsCount = document.getElementById('resultsCount');
      const paginationContainer = document.getElementById('pagination');
      
      resultsCount.innerHTML = '총 <span class="results-count-number">0</span>건';
      paginationContainer.style.display = 'none';
      
      resultsContainer.innerHTML = `
        <div class="empty-state">
          <svg class="empty-state-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2"></path>
            <path d="M8.5 2h7"></path>
          </svg>
          <p class="empty-state-title">검색 결과가 없습니다</p>
          <p class="empty-state-text">다른 검색 조건으로 다시 시도해보세요</p>
        </div>
      `;
    }

    // Handle row click
    function handleRowClick(consultationId) {
      // TODO: Navigate to consultation detail page
      console.log('Navigate to detail:', consultationId);
      showToast(`상담 상세 페이지로 이동합니다: ${consultationId}`, 'success');
      
      // Simulate navigation
      // window.location.href = `/consultations/${consultationId}`;
    }

    // Handle reset button
    function handleReset() {
      const form = document.getElementById('searchForm');
      form.reset();
      
      // Reset results
      currentSearchParams = null;
      currentPage = 1;
      
      const resultsContainer = document.getElementById('resultsContainer');
      const resultsCount = document.getElementById('resultsCount');
      const paginationContainer = document.getElementById('pagination');
      
      resultsCount.innerHTML = '총 <span class="results-count-number">0</span>건';
      paginationContainer.style.display = 'none';
      
      resultsContainer.innerHTML = `
        <div class="empty-state">
          <svg class="empty-state-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
          <p class="empty-state-title">검색 조건을 입력해주세요</p>
          <p class="empty-state-text">위의 검색 조건을 입력하고 검색 버튼을 클릭하세요</p>
        </div>
      `;
    }

    // Utility functions
    function truncateText(text, maxLength) {
      if (text.length <= maxLength) return escapeHtml(text);
      return escapeHtml(text.substring(0, maxLength)) + '...'; } 함수 getSimilarityClass(점수) { 점수 >= 85이면 '높음'을 반환합니다. 점수 >= 70이면 '중간'을 반환합니다. '낮음'을 반환합니다. } 함수 formatDateTime(날짜문자열) { const 날짜 = 새 날짜(날짜문자열); const 년 = date.getFullYear(); const 월 = String(날짜.getMonth() + 1).padStart(2, '0'); const 일 = String(날짜.getDate()).padStart(2, '0'); const 시간 = String(날짜.getHours()).padStart(2, '0'); const 분 = String(날짜.getMinutes()).padStart(2, '0'); `${년}-${월}-${일} ${시간}:${분}`을 반환합니다. } 함수 escapeHtml(텍스트) { const div = document.createElement('div'); div.textContent = 텍스트; return div.innerHTML; } // 토스트 알림 표시 함수 showToast(message, type = 'success') { const toast = document.getElementById('toast'); const toastMessage = document.getElementById('toastMessage'); const toastIcon = document.getElementById('toastIcon'); toastMessage.textContent = message; toast.className = `toast ${type} show`; // 유형에 따라 아이콘 업데이트 if (type === 'success') { toastIcon.innerHTML = ` <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path> <polyline points="22 4 12 14.01 9 11.01"></polyline> `; } else { toastIcon.innerHTML = ` <circle cx="12" cy="12" r="10"></circle> <line x1="15" y1="9" x2="9" y2="15"></line> <line x1="9" y1="9" x2="15" y2="15"></line> `; } // 3초 후 자동으로 숨김 setTimeout(() => { toast.classList.remove('show'); }, 3000); } // 로그아웃 처리 함수 handleLogout() { // TODO: API Connect - POST /api/auth/logout console.log('로그아웃 중...'); // window.location.href = '/login'; } </script> <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a915063622e30ce',t:'MTc2NDkxNDMzMC4wMDAwMDA='};var a=document.createElement('스크립트');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.document.addChild(a);if('로딩 중'!==document.readyState)c(); 그렇지 않으면 document.addEventListener('DOMContentLoaded',c); 그렇지 않으면{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'로딩 중'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body> </html>