<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>로그인 - KWH 지식관리시스템</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body { box-sizing: border-box; margin: 0; padding: 0; font-family: "Noto Sans KR", "Apple SD Gothic Neo", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; font-size: 14px; line-height: 1.5; color: #212121; 배경: 선형 그라데이션(135도, #005BAC 0%, #1A73E8 100%); 높이: 100%; 디스플레이: 플렉스; 정렬 항목: 중앙; 정렬 콘텐츠: 중앙; } *, *::before, *::after { box-sizing: 상속; } html { 높이: 100%; } /* 로그인 컨테이너 */ .auth-container { 너비: 100%; 최대 너비: 440px; 패딩: 20px; } /* 인증 카드 */ .auth-card { 배경색: #FFFFFF; 테두리 반경: 12px; 상자 그림자: 0px 8px 24px rgba(0,0,0,0.15); 패딩: 48px 40px; 애니메이션: fadeInUp 0.4s ease-out; } @keyframes fadeInUp { { opacity: 0; transform: translateY(20px); }에서 { opacity: 1; transform: translateY(0); }로 } /* 로고 및 제목 */ .auth-header { text-align: center; margin-bottom: 32px; } .auth-logo { width: 64px; height: 64px; margin: 0 auto 16px; background-color: #005BAC; border-radius: 12px; display: flex; align-items: center; justify-content: center; color: #FFFFFF; font-size: 28px; font-weight: 700; } .auth-title { font-size: 24px; font-weight: 700; color: #005BAC; margin: 0 0 4px 0; } .auth-subtitle { 글꼴 크기: 14px; 색상: #6E6E6E; 여백: 0; } /* 양식 */ .auth-form { 여백 하단: 24px; } .form-field { 여백 하단: 16px; } .form-label { 디스플레이: 블록; 글꼴 크기: 13px; 글꼴 무게: 600; 색상: #212121; 여백 하단: 6px; } .form-label.required::after { 콘텐츠: '*'; 색상: #C62828; 여백 왼쪽: 4px; } .form-input, .form-select { 너비: 100%; 최소 높이: 44px; 테두리: 1px 단색 #BDBDBD; 테두리 반경: 6px; 패딩: 0 14px; 글꼴 크기: 14px; 글꼴 패밀리: 상속; 색상: #212121; 전환: 모두 0.2초; } .form-input:focus, .form-select:focus { 윤곽선: 없음; 테두리 색상: #1A73E8; 상자 그림자: 0 0 0 3px rgba(26,115,232,0.1); } .form-input.error { 테두리 색상:#C62828; } .form-error { font-size: 12px; color: #C62828; margin-top: 4px; display: none; } .form-error.show { display: block; } .form-hint { font-size: 12px; color: #6E6E6E; margin-top: 4px; } /* 버튼 */ .btn-primary { width: 100%; min-height: 44px; background-color: #005BAC; color: #FFFFFF; border: none; border-radius: 6px; font-size: 15px; font-weight: 600; cursor: pointer; transition: background-color 0.2s; display: flex; align-items: center; justify-content: center; gap: 8px; } .btn-primary:hover:not(:disabled) { 배경색: #00437F; } .btn-primary:disabled { 배경색: #BDBDBD; 커서: 허용되지 않음; } .btn-secondary { 너비: 100%; 최소 높이: 44px; 배경색: #FFFFFF; 색상: #005BAC; 테두리: 1px 단색 #005BAC; 테두리 반경: 6px; 글꼴 크기: 15px; 글꼴 두께: 600; 커서: 포인터; 전환: 모두 0.2초; 표시: flex; 정렬 항목: 가운데; 정렬 콘텐츠: 가운데; 간격: 8px; 위쪽 여백: 12px; } .btn-secondary:hover { 배경색: #E8F1FB; } .btn-icon { 너비: 18px; 높이: 18px; } /* 구분선 */ .divider { display: flex; align-items: center; margin: 24px 0; color: #9E9E9E; font-size: 13px; } .divider::before, .divider::after { content: ''; flex: 1; height: 1px; background-color: #E0E0E0; } .divider::before { margin-right: 12px; } .divider::after { margin-left: 12px; } /* SSO 버튼 */ .btn-sso { width: 100%; min-height: 44px; background-color: #FFFFFF; color: #424242; border: 1px solid #E0E0E0; border-radius: 6px; font-size: 14px; font-weight: 600; 커서: 포인터; 전환: 모두 0.2초; 디스플레이: 플렉스; 정렬-항목: 중앙; 정렬-내용: 중앙; 간격: 8px; } .btn-sso:hover { 배경색: #F5F5F5; 테두리색: #BDBDBD; } .sso-icon { 너비: 20px; 높이: 20px; } /* 바닥글 링크 */ .auth-footer { 텍스트 정렬: 중앙; 여백-상단: 20px; } .auth-link { 색상: #005BAC; 텍스트 장식: 없음; 글꼴 크기: 14px; 글꼴 무게: 600; 전환: 색상 0.2초; } .auth-link:hover { 색상: #1A73E8; 텍스트 장식: 밑줄; } /* 스피너 로딩 */ .spinner { 디스플레이: 인라인-블록; 너비: 18px; 높이: 18px; 테두리: 2px solid #FFFFFF; 테두리-상단-색상: 투명; 테두리-반경: 50%; 애니메이션: 회전 0.8초 선형 무한; } @keyframes spin { to { 변형:rotate(360deg); } } /* 토스트 알림 */ .toast { position: fixed; top: 24px; right: 24px; background-color: #FFFFFF; border-radius: 6px; box-shadow: 0px 4px 12px rgba(0,0,0,0.15); padding: 12px 16px; display: none; align-items: center; gap: 8px; z-index: 2000; min-width: 280px; border-left: 4px solid; } .toast.show { display: flex; animation: slideIn 0.3s ease-out; } .toast.success { border-left-color: #2E7D32; } .toast.error { border-left-color: #C62828; } .toast-icon { width: 20px; height: 20px; flex-shrink: 0; } .toast-message { flex: 1; font-size: 14px; color: #212121; } @keyframes slideIn { from { transform: translateX(400px); opacity: 0; } to { transform: translateX(0); opacity: 1; } } /* 페이지 전환 */ .page-hidden { display: none; } /* select의 역할 배지 */ .role-description { font-size: 12px; color: #6E6E6E; margin-top: 4px; }
    </style>
    <style>
      @view-transition { navigation: auto;
    </style>
    <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
    <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
    <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
  </head>
  <body>
    <!-- 로그인 페이지 -->
    <div class="auth-container" id="loginPage">
      <div class="auth-card">
        <div class="auth-header">
          <div class="auth-logo">KJB</div>
          <h1 class="auth-title">KWH 지식관리시스템</h1>
          <p class="auth-subtitle">광주은행 헬프데스크 위키</p>
        </div>
        <form class="auth-form" id="loginForm" onsubmit="handleLogin(event)">
          <div class="form-field">
            <label class="form-label required" for="login_employee_id"
              >직번</label
            >
            <input
              type="text"
              class="form-input"
              id="login_employee_id"
              name="employee_id"
              placeholder="직번을 입력하세요"
              required
            />
            <div class="form-error" id="login_employee_id_error"></div>
          </div>
          <div class="form-field">
            <label class="form-label required" for="login_password"
              >비밀번호</label
            >
            <input
              type="password"
              class="form-input"
              id="login_password"
              name="password"
              placeholder="비밀번호를 입력하세요"
              required
            />
            <div class="form-error" id="login_password_error"></div>
          </div>
          <button type="submit" class="btn-primary" id="loginBtn">
            <svg
              class="btn-icon"
              viewbox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
              <polyline points="10 17 15 12 10 7"></polyline>
              <line x1="15" y1="12" x2="3" y2="12"></line></svg
            ><span id="loginBtnText">로그인</span>
          </button>
          <button
            type="button"
            class="btn-secondary"
            onclick="showRegisterPage()"
          >
            <svg
              class="btn-icon"
              viewbox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
              <circle cx="8.5" cy="7" r="4"></circle>
              <line x1="20" y1="8" x2="20" y2="14"></line>
              <line x1="23" y1="11" x2="17" y2="11"></line>
            </svg>
            회원가입
          </button>
        </form>
        <div class="divider">또는</div>
        <button class="btn-sso" onclick="handleSSOLogin()">
          <svg
            class="sso-icon"
            viewbox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
          </svg>
          SSO 로그인
        </button>
      </div>
    </div>
    <!-- 등록 페이지 -->
    <div class="auth-container page-hidden" id="registerPage">
      <div class="auth-card">
        <div class="auth-header">
          <div class="auth-logo">KJB</div>
          <h1 class="auth-title">회원가입</h1>
          <p class="auth-subtitle">KWH 시스템 계정을 생성합니다</p>
        </div>
        <form
          class="auth-form"
          id="registerForm"
          onsubmit="handleRegister(event)"
        >
          <div class="form-field">
            <label class="form-label required" for="register_employee_id"
              >직번</label
            >
            <input
              type="text"
              class="form-input"
              id="register_employee_id"
              name="employee_id"
              placeholder="직번을 입력하세요"
              required
            />
            <div class="form-hint">예: EMP1234</div>
            <div class="form-error" id="register_employee_id_error"></div>
          </div>
          <div class="form-field">
            <label class="form-label required" for="register_name">이름</label>
            <input
              type="text"
              class="form-input"
              id="register_name"
              name="name"
              placeholder="이름을 입력하세요"
              required
            />
            <div class="form-error" id="register_name_error"></div>
          </div>
          <div class="form-field">
            <label class="form-label required" for="register_department"
              >부서</label
            >
            <input
              type="text"
              class="form-input"
              id="register_department"
              name="department"
              placeholder="부서명을 입력하세요"
              required
            />
            <div class="form-hint">예:디지털전략부</div>
            <div class="form-error" id="register_department_error"></div>
          </div>
          <div class="form-field">
            <label class="form-label required" for="register_role">역할</label>
            <select class="form-select" id="register_role" name="role" required>
              <option value="">역할을 해제하세요</option>
              <option value="CONSULTANT">상담사</option>
              <option value="REVIEWER">검토자</option>
              <option value="ADMIN">관리자</option>
            </select>
            <div class="role-description" id="roleDescription"></div>
            <div class="form-error" id="register_role_error"></div>
          </div>
          <div class="form-field">
            <label class="form-label required" for="register_password"
              >비밀번호</label
            >
            <input
              type="password"
              class="form-input"
              id="register_password"
              name="password"
              placeholder="비밀번호를 입력하세요"
              require
              minlength="8"
            />
            <div class="form-hint">최소 8자 이상입력하세요</div>
            <div class="form-error" id="register_password_error"></div>
          </div>
          <div class="form-field">
            <label class="form-label require" for="register_password_confirm"
              >비밀번호 확인 확인</label
            >
            <input
              type="password"
              class="form-input"
              id="register_password_confirm"
              name="password_confirm"
              placeholder="비밀번호를 다시 입력하세요"
              require
              minlength="8"
            />
            <div class="form-error" id="register_password_confirm_error"></div>
          </div>
          <button type="submit" class="btn-primary" id="registerBtn">
            <svg
              class="btn-icon"
              viewbox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
              <circle cx="8.5" cy="7" r="4"></circle>
              <line x1="20" y1="8" x2="20" y2="14"></line>
              <line x1="23" y1="11" x2="17" y2="11"></line></svg
            ><span id="registerBtnText">가입하기</span>
          </button>
        </form>
        <div class="auth-footer">
          <a
            href="#"
            class="auth-link"
            onclick="showLoginPage(); return false;"
          >
            ← 로그인으로 돌아가기
          </a>
        </div>
      </div>
    </div>
    <!-- Toast Notification -->
    <div class="toast" id="toast">
      <svg
        class="toast-icon"
        viewbox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        id="toastIcon"
      >
        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
        <polyline points="22 4 12 14.01 9 11.01"></polyline></svg
      ><span class="toast-message" id="toastMessage"></span>
    </div>
    <script>
      // Role descriptions
      const roleDescriptions = {
        'CONSULTANT': '상담 내역을 등록하고 메뉴얼 초안을 생성할 수 있습니다',
        'REVIEWER': '메뉴얼 초안을 검토하고 승인할 수 있습니다',
        'ADMIN': '시스템 전체를 관리하고 사용자 권한을 설정할 수 있습니다'
      };

      // Show/Hide pages
      function showLoginPage() {
        document.getElementById('loginPage').classList.remove('page-hidden');
        document.getElementById('registerPage').classList.add('page-hidden');

        // Reset register form
        document.getElementById('registerForm').reset();
        clearErrors('register');
      }

      function showRegisterPage() {
        document.getElementById('loginPage').classList.add('page-hidden');
        document.getElementById('registerPage').classList.remove('page-hidden');

        // Reset login form
        document.getElementById('loginForm').reset();
        clearErrors('login');
      }

      // Handle role selection change
      document.getElementById('register_role').addEventListener('change', function(e) {
        const roleDescription = document.getElementById('roleDescription');
        const selectedRole = e.target.value;

        if (selectedRole && roleDescriptions[selectedRole]) {
          roleDescription.textContent = roleDescriptions[selectedRole];
        } else {
          roleDescription.textContent = '';
        }
      });

      // Handle login
      async function handleLogin(event) {
        event.preventDefault();

        const form = document.getElementById('loginForm');
        const formData = new FormData(form);
        const loginBtn = document.getElementById('loginBtn');
        const loginBtnText = document.getElementById('loginBtnText');

        // Clear previous errors
        clearErrors('login');

        // Get form values
        const employeeId = formData.get('employee_id').trim();
        const password = formData.get('password');

        // Validate
        let hasError = false;

        if (!employeeId) {
          showFieldError('login_employee_id', '직번을 입력하세요');
          hasError = true;
        }

        if (!password) {
          showFieldError('login_password','비밀번호를 입력하세요'); hasError = true; } if (hasError) return; // 로딩 표시 loginBtn.disabled = true; loginBtnText.innerHTML = '<span class="spinner"></span>'; try { // TODO: API Connect - POST /api/auth/login // 요청 본문: { employee_id, password } // API 호출 시뮬레이션 await new Promise(resolve => setTimeout(resolve, 1500)); // 모의 응답 const response = { success: true, data: { user: { employee_id: employeeId, name: '홍길동', department: '디지털전략부', role: '컨설턴트' }, token: 'mock-jwt-token-' + Date.now() } }; if (response.success) { // 토큰 저장(실제 앱에서는 보안 저장소 사용) localStorage.setItem('auth_token', response.data.token); localStorage.setItem('user_info', JSON.stringify(response.data.user)); showToast('로그인 성공! 대시보드로 이동합니다.', '성공'); // 대시보드로 이동 setTimeout(() => { // TODO: 대시보드로 이동 console.log('대시보드로 이동'); // window.location.href = '/dashboard'; }, 1500); } else { throw new Error('로그인 실패'); } } catch (오류) { console.error('로그인 오류:', error); showToast('직번 또는 포스틱이 올바르지 않습니다.', 'error'); // 재설정 버튼 loginBtn.disabled = false; loginBtnText.innerHTML = '로그인'; } } // 등록 비동기 함수 처리 handleRegister(event) { event.preventDefault(); const form = document.getElementById('registerForm'); const formData = new FormData(form); const registerBtn = document.getElementById('registerBtn'); const registerBtnText = document.getElementById('registerBtnText'); // 이전 오류 지우기 clearErrors('register'); // 양식 값 가져오기 const employeeId = formData.get('employee_id').trim(); const name = formData.get('name').trim(); const department = formData.get('department').trim(); const role = formData.get('role'); const password = formData.get('password'); const passwordConfirm = formData.get('password_confirm'); // 검증 let hasError = false; if (!employeeId) { showFieldError('register_employee_id', '직번을 입력하세요'); hasError = 참; } if (!name) { showFieldError('register_name','이름을 입력하세요');
          hasError = true;
        }

        if (!department) {
          showFieldError('register_department', '부서를 입력하세요');
          hasError = true;
        }

        if (!role) {
          showFieldError('register_role', '역할을 선택하세요');
          hasError = true;
        }

        if (!password) {
          showFieldError('register_password', '비밀번호를 입력하세요');
          hasError = true;
        } else if (password.length < 8) {
          showFieldError('register_password', '비밀번호는 최소 8자 이상이어야 합니다');
          hasError = true;
        }

        if (!passwordConfirm) {
          showFieldError('register_password_confirm', '비밀번호 확인을 입력하세요');
          hasError = true;
        } else if (password !== passwordConfirm) {
          showFieldError('register_password_confirm', '비밀번호가 일치하지 않습니다');
          hasError = true;
        }

        if (hasError) return;

        // Show loading
        registerBtn.disabled = true;
        registerBtnText.innerHTML = '<span class="spinner"></span>';

        try {
          // TODO: API Connect - POST /api/auth/register
          // Request body: { employee_id, name, department, role, password }

          // Simulate API call
          await new Promise(resolve => setTimeout(resolve, 1500));

          // Mock response
          const response = {
            success: true,
            data: {
              user: {
                employee_id: employeeId,
                name: name,
                department: department,
                role: role
              }
            }
          };

          if (response.success) {
            showToast('회원가입이 완료되었습니다! 로그인 페이지로 이동합니다.', 'success');

            // Navigate to login page
            setTimeout(() => {
              showLoginPage();

              // Pre-fill employee_id
              document.getElementById('login_employee_id').value = employeeId;
            }, 1500);
          } else {
            throw new Error('회원가입 실패');
          }

        } catch (error) {
          console.error('Register error:', error);
          showToast('회원가입 중 오류가 발생했습니다. 다시 시도해주세요.', 'error');

          // Reset button
          registerBtn.disabled = false;
          registerBtnText.innerHTML = '가입하기';
        }
      }

      // Handle SSO login
      async function handleSSOLogin() {
        // TODO: API Connect - GET /api/auth/sso
        // This should redirect to SSO provider

        showToast('SSO 인증 페이지로 이동합니다...', 'success');

        setTimeout(() => {
          console.log('Redirect to SSO provider');
          // window.location.href = '/api/auth/sso';
        }, 1000);
      }

      // Show field error
      function showFieldError(fieldId, message) {
        const input = document.getElementById(fieldId); const errorElement = document.getElementById(fieldId + '_error'); if (input && errorElement) { input.classList.add('error'); errorElement.textContent = message; errorElement.classList.add('show'); } } // 오류 지우기 함수 clearErrors(prefix) { const inputs = document.querySelectorAll(`#${prefix}Form .form-input, #${prefix}Form .form-select`); const errors = document.querySelectorAll(`#${prefix}Form .form-error`); inputs.forEach(input => input.classList.remove('error')); errors.forEach(error => { error.textContent = ''; error.classList.remove('show'); }); } // 토스트 알림 기능 표시 showToast(message, type = 'success') { const toast = document.getElementById('toast'); const toastMessage = document.getElementById('toastMessage'); const toastIcon = document.getElementById('toastIcon'); toastMessage.textContent = message; toast.className = `toast ${type} show`; // 유형에 따라 아이콘 업데이트 if (type === 'success') { toastIcon.innerHTML = ` <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path> <polyline points="22 4 12 14.01 9 11.01"></polyline> `; } else { toastIcon.innerHTML = ` <circle cx="12" cy="12" r="10"></circle> <line x1="15" y1="9" x2="9" y2="15"></line> <line x1="9" y1="9" x2="15" y2="15"></line> `; } // 3초 후 자동으로 숨김 setTimeout(() => { toast.classList.remove('show'); }, 3000); } // 페이지 초기화 document.addEventListener('DOMContentLoaded', function() { // 이미 로그인했는지 확인 const authToken = localStorage.getItem('auth_token'); if (authToken) { console.log('사용자가 이미 로그인했습니다. 대시보드로 리디렉션'); // window.location.href = '/dashboard'; } });
    </script>
    <script>
      (function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a9199595057f804',t:'MTc2NDkxNzMxOS4wMDAwMDA='};var a=document.createElement('스크립트');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.상단=0;a.style.left=0;a.style.border='없음';a.style.가시성='숨김';document.body.appendChild(a);if('로딩 중'!==document.readyState)c(); 그렇지 않으면 if(window.addEventListener)document.addEventListener('DOMContentLoaded',c); 그렇지 않으면{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'로딩 중'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();
    </script>
  </body>
</html>
