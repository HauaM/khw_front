# 메뉴얼 버전 비교 기능 - 통합 테스트 체크리스트

**목적**: 프론트엔드와 백엔드 API의 통합을 검증하는 테스트 절차
**담당**: QA 팀 또는 개발 팀
**작성일**: 2025년 1월

---

## 📋 사전 준비

### 필수 환경
- [ ] 백엔드 API 서버 실행 (http://localhost:8000)
- [ ] 프론트엔드 개발 서버 실행 (http://localhost:5173)
- [ ] 브라우저 DevTools 열어두기
- [ ] Postman 또는 curl 준비 (API 직접 호출 테스트용)

### 테스트 데이터
- [ ] 유효한 메뉴얼 ID 확보 (UUID 형식)
- [ ] 최소 2개 이상의 버전 데이터 필요
- [ ] 버전 간 차이점 있어야 함 (키워드, 가이드라인 변경)

---

## 🧪 1. 백엔드 API 동작 검증

### 1-1. 버전 목록 조회 API 테스트

#### 테스트 케이스 1: 정상 응답

**API 호출**
```bash
curl -X GET "http://localhost:8000/api/v1/manuals/{manual_id}/versions"
```

**기대 결과** ✅
- [ ] HTTP 상태: 200 OK
- [ ] 응답 형식: JSON 배열
- [ ] 각 항목에 필수 필드 포함:
  - [ ] `value`: 버전 문자열 (예: "v2.1")
  - [ ] `label`: 표시용 레이블 (예: "v2.1 (현재 버전)")
  - [ ] `date`: 날짜 (예: "2024-01-15")
- [ ] 버전이 최신순으로 정렬됨 (내림차순)
- [ ] 첫 번째 항목에만 "(현재 버전)" 표시

**실패 시 확인** ❌
- [ ] 응답 형식 확인
- [ ] 필드명 확인 (value vs version, label vs description)
- [ ] 날짜 형식 확인 (YYYY-MM-DD)

#### 테스트 케이스 2: 메뉴얼 없음

**API 호출**
```bash
curl -X GET "http://localhost:8000/api/v1/manuals/00000000-0000-0000-0000-000000000000/versions"
```

**기대 결과** ✅
- [ ] HTTP 상태: 404 Not Found
- [ ] 에러 메시지 포함

### 1-2. 버전 상세 조회 API 테스트

#### 테스트 케이스 1: 정상 응답

**API 호출**
```bash
curl -X GET "http://localhost:8000/api/v1/manuals/{manual_id}/versions/v2.1"
```

**기대 결과** ✅
- [ ] HTTP 상태: 200 OK
- [ ] 응답 형식: JSON 객체
- [ ] 필수 필드 포함:
  - [ ] `manual_id`: UUID 형식
  - [ ] `version`: 버전 문자열 (예: "v2.1")
  - [ ] `topic`: 문자열
  - [ ] `keywords`: 문자열 배열
  - [ ] `background`: 문자열
  - [ ] `guidelines`: 객체 배열
    - [ ] 각 객체에 `title`, `description` 포함
  - [ ] `status`: "APPROVED" 또는 "DEPRECATED"
  - [ ] `updated_at`: ISO 8601 형식

**Guideline 형식 검증** ✅
```json
{
  "guidelines": [
    {
      "title": "계정 상태 확인",
      "description": "고객의 아이디를 확인하여..."
    },
    {
      "title": "브라우저 점검",
      "description": "고객이 사용 중인..."
    }
  ]
}
```
- [ ] `guidelines`는 배열 (문자열 아님)
- [ ] 각 항목에 `title`과 `description` 포함
- [ ] 빈 값이 없음

#### 테스트 케이스 2: 존재하지 않는 버전

**API 호출**
```bash
curl -X GET "http://localhost:8000/api/v1/manuals/{manual_id}/versions/v99.9"
```

**기대 결과** ✅
- [ ] HTTP 상태: 404 Not Found
- [ ] 에러 메시지 포함

---

## 🌐 2. 프론트엔드 - 백엔드 통합 테스트

### 2-1. 페이지 접근

**테스트 절차**
1. [ ] 브라우저에서 다음 URL 접근:
   ```
   http://localhost:5173/manuals/{manual_id}/versions/compare
   ```

2. [ ] 또는 쿼리 파라미터 지정:
   ```
   http://localhost:5173/manuals/{manual_id}/versions/compare?old=v2.0&new=v2.1
   ```

**기대 결과** ✅
- [ ] 페이지 로드 성공
- [ ] 로딩 스피너 표시 (잠시)
- [ ] 콘솔에 에러 없음
- [ ] Network 탭에서:
  - [ ] GET `/api/v1/manuals/{manualId}/versions` 요청 확인 (상태: 200)
  - [ ] 응답 데이터 확인

### 2-2. 버전 목록 표시

**기대 결과** ✅
- [ ] 버전 선택 드롭다운 표시됨
- [ ] 모든 버전이 드롭다운에 표시됨
- [ ] 각 항목 형식: "v2.1 (2024-01-15)"
- [ ] 첫 번째 버전이 기본값으로 선택됨

**콘솔 확인** ✅
- [ ] "Version API not available" 경고 **없음** (API가 정상 작동)
- [ ] 기타 에러 메시지 없음

### 2-3. 버전 선택 후 데이터 로드

**테스트 절차**
1. [ ] 이전 버전 선택 (예: v2.0)
2. [ ] 최신 버전 선택 (예: v2.1)

**기대 결과** ✅
- [ ] 로딩 스피너 표시 (잠시)
- [ ] Network 탭에서:
  - [ ] GET `/api/v1/manuals/{manualId}/versions/v2.0` 요청 확인
  - [ ] GET `/api/v1/manuals/{manualId}/versions/v2.1` 요청 확인
  - [ ] 두 요청 모두 상태: 200
  - [ ] **병렬 로드** (거의 동시에 요청)

### 2-4. 비교 데이터 표시

**좌측 컬럼 (이전 버전 v2.0)** ✅
- [ ] 버전 표시: "v2.0"
- [ ] 주제 표시
- [ ] 키워드 표시
- [ ] 배경 정보 표시
- [ ] 조치사항 목록 표시 (번호 포함)
- [ ] 상태 배지 표시 ("승인됨" 또는 "사용 중단")
- [ ] 업데이트 날짜 표시

**우측 컬럼 (최신 버전 v2.1)** ✅
- [ ] 버전 표시: "v2.1"
- [ ] 모든 필드가 좌측과 동일하게 표시됨

### 2-5. 변경사항 표시 검증

#### 키워드 변경 감지

**시나리오 1: 추가된 키워드**
- [ ] 이전 버전에는 없고 최신에만 있는 키워드
- [ ] **우측(최신) 컬럼에서 초록색 배경**으로 표시
- [ ] **좌측(이전) 컬럼에서 표시 안 됨**

**시나리오 2: 삭제된 키워드**
- [ ] 이전 버전에만 있고 최신에는 없는 키워드
- [ ] **좌측(이전) 컬럼에서 빨간색 배경 + 취소선**으로 표시
- [ ] **우측(최신) 컬럼에서 표시 안 됨**

**시나리오 3: 유지된 키워드**
- [ ] 두 버전 모두 있는 키워드
- [ ] **파란색 배경**으로 표시 (변경 없음)

#### 조치사항(가이드라인) 변경 감지

**시나리오 1: 추가된 조치사항**
- [ ] 예: v2.1에만 "2차 인증 문제 해결 (신규)" 있음
- [ ] **우측(최신) 컬럼에서 초록색 테두리 (왼쪽)**으로 표시
- [ ] 번호 및 제목, 설명 표시

**시나리오 2: 삭제된 조치사항**
- [ ] 예: v2.0에만 있던 조치사항
- [ ] **좌측(이전) 컬럼에서 빨간색 테두리 + 흐린 표시**
- [ ] 번호 및 제목, 설명 표시

**시나리오 3: 수정된 조치사항**
- [ ] 제목은 같지만 설명이 다른 경우
- [ ] **주황색 테두리 (왼쪽)**으로 표시
- [ ] 설명 차이 시각적으로 구분

**시나리오 4: 유지된 조치사항**
- [ ] 두 버전 모두 동일한 조치사항
- [ ] **회색 배경**으로 표시 (변경 없음)

### 2-6. 범례 확인

**기대 결과** ✅
- [ ] "변경사항 표시" 섹션 표시
- [ ] 4가지 상태 범례:
  - [ ] 추가됨 (초록색)
  - [ ] 삭제됨 (빨간색)
  - [ ] 수정됨 (주황색)
  - [ ] 변경 없음 (회색)

---

## 🔄 3. 상호작용 테스트

### 3-1. 버전 선택 변경

**테스트 절차**
1. [ ] 이전 버전 드롭다운에서 다른 버전 선택
2. [ ] 또는 최신 버전 드롭다운에서 다른 버전 선택

**기대 결과** ✅
- [ ] 비교 데이터 즉시 업데이트
- [ ] 로딩 스피너 표시 (잠시)
- [ ] Network 탭에서 새로운 API 요청 확인
- [ ] 변경사항 정확하게 표시됨

### 3-2. 돌아가기 버튼

**테스트 절차**
1. [ ] 페이지의 "돌아가기" 버튼 클릭

**기대 결과** ✅
- [ ] `/manuals/{manualId}` 페이지로 이동
- [ ] 메뉴얼 상세 페이지 로드

### 3-3. Breadcrumb 네비게이션

**테스트 절차**
1. [ ] Breadcrumb의 "메뉴얼" 링크 클릭

**기대 결과** ✅
- [ ] `/manuals/{manualId}` 페이지로 이동

---

## ⚠️ 4. 에러 처리 테스트

### 4-1. API 요청 실패

**시나리오: 백엔드 API 다운**

**테스트 절차**
1. [ ] 백엔드 서버 중지
2. [ ] 페이지 새로고침
3. [ ] 버전 선택

**기대 결과** ✅
- [ ] 콘솔에 "Version API not available" 또는 "Version detail API not available" 경고
- [ ] Mock 데이터로 폴백하여 정상 표시
- [ ] UI는 정상 동작

### 4-2. 존재하지 않는 메뉴얼

**테스트 절차**
1. [ ] 잘못된 메뉴얼 ID로 URL 접근:
   ```
   http://localhost:5173/manuals/invalid-id/versions/compare
   ```

**기대 결과** ✅
- [ ] 적절한 에러 메시지 표시
- [ ] 에러 토스트 표시 (선택적)

### 4-3. 빈 응답

**테스트 절차**
1. [ ] 버전이 없는 메뉴얼로 테스트

**기대 결과** ✅
- [ ] "사용 가능한 버전이 없습니다" 메시지 표시

---

## 🎨 5. UI/UX 테스트

### 5-1. 반응형 디자인

#### 데스크톱 (1200px 이상)
- [ ] 2열 레이아웃 (좌우)
- [ ] 모든 요소 정상 표시

#### 태블릿 (768px ~ 1199px)
- [ ] 레이아웃 유지
- [ ] 가독성 유지

#### 모바일 (768px 이하)
- [ ] 1열 레이아웃으로 변환 (위아래)
- [ ] 버전 선택 드롭다운 표시
- [ ] 스크롤 가능

### 5-2. 시각적 일관성

- [ ] 색상 코딩 정확함
- [ ] 폰트 크기 일관성
- [ ] 간격(padding, margin) 일관성
- [ ] 배지 및 아이콘 표시 정확함

### 5-3. 접근성

- [ ] 키보드 네비게이션 가능
- [ ] 드롭다운 선택 가능
- [ ] 색상에만 의존하지 않음 (범례 제공)

---

## 📊 6. 성능 테스트

### 6-1. 초기 로드 시간

**기대 결과** ✅
- [ ] 페이지 로드: 2초 이내
- [ ] 버전 목록 로드: 1초 이내
- [ ] 버전 상세 로드: 1초 이내 (병렬)

### 6-2. 버전 선택 응답 시간

**기대 결과** ✅
- [ ] 버전 변경 후 데이터 업데이트: 500ms 이내

### 6-3. 네트워크 성능

**DevTools Network 탭 확인**
- [ ] API 응답 크기 적절함 (< 1MB)
- [ ] 요청 수 최소화 (버전 목록 1개, 상세 2개)

---

## 🔍 7. 데이터 정확성 테스트

### 7-1. 버전 목록 정렬

**기대 결과** ✅
- [ ] 가장 최신 버전이 첫번째
- [ ] 날짜 순으로 내림차순

### 7-2. 데이터 일치성

**테스트 절차**
1. [ ] Postman으로 API 직접 호출
2. [ ] UI에 표시된 데이터와 비교

**기대 결과** ✅
- [ ] 데이터 정확하게 일치
- [ ] 형식 정확함 (날짜, 상태 등)

### 7-3. 변경사항 감지 정확성

**테스트 절차**
1. [ ] 수동으로 두 버전 데이터 비교
2. [ ] UI의 색상 표시와 비교

**기대 결과** ✅
- [ ] 추가/삭제/수정 정확하게 감지
- [ ] 위음성/위양성 없음

---

## ✅ 최종 검증

### 8-1. 모든 테스트 결과

- [ ] 모든 테스트 케이스 통과
- [ ] 에러 메시지 없음
- [ ] 콘솔 경고 없음 (API 정상 작동 시)

### 8-2. 문서 완성도

- [ ] 구현 완료 부분 모두 정상 작동
- [ ] 안내 및 설명 정확함

### 8-3. 프로덕션 준비

- [ ] 모든 변수명이 일관성 있음
- [ ] 하드코딩된 값 없음
- [ ] 설정 가능한 상수들이 명확함

---

## 📝 테스트 결과 보고

**테스트 날짜**: _______________
**테스트자**: _______________
**백엔드 버전**: _______________
**프론트엔드 버전**: _______________

### 테스트 결과
- [ ] ✅ 모든 항목 통과
- [ ] ⚠️ 일부 항목 실패 (아래 기록)
- [ ] ❌ 주요 항목 실패

### 실패 항목 (해당 사항 있으면 기록)

| 테스트 항목 | 기대 결과 | 실제 결과 | 심각도 | 비고 |
|----------|---------|---------|--------|------|
| | | | | |
| | | | | |
| | | | | |

### 추가 의견

_______________________________________________

---

## 🎓 참고 자료

- **INTEGRATION_COMPLETE.md**: 통합 상태 요약
- **BACKEND_API_GUIDE.md**: 백엔드 API 스펙
- **API_TYPE_MAPPING.md**: 타입 매핑 설명
- **docs/openapi.json**: OpenAPI 3.1.0 정의

---

**테스트 완료 후**: 이 체크리스트를 보존하여 향후 회귀 테스트에 활용하세요.
